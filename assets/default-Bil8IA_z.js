import{p as R,G as F,s as k,c,a0 as $,w as C,o as j,b as q,j as z,q as W,E as D,u as O,H as G,y as T,J as X,L as d,M as A,d as J,a1 as Z,f as K,a2 as Q,k as ee,l as te,n as ae,a3 as oe,x as le,B as ne,a4 as se,a5 as re,a6 as ue,a7 as ie,a8 as ce,a9 as de,aa as ve,ab as ge,ac as me,S as fe,ad as he,ae as be,U as Se,W as _,X as y,O as L,Y as w,af as P,ag as I,ah as ye,_ as we,Z as p,$ as H,ai as U,aj as N,ak as ke}from"./index-B1aakBra.js";import{m as Be,V as Y}from"./VToolbar-GHq39cnw.js";import{u as Ve}from"./ssrBoot-C9Msaj6g.js";import{V as xe}from"./VMain--oTMaHAY.js";import{V as Ce}from"./VContainer-CzdA3Bnu.js";const pe=R({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Te(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:g}=o;let m=0,r=0;const t=F(null),u=k(0),s=k(0),i=k(0),h=k(!1),a=k(!1),f=c(()=>Number(e.scrollThreshold)),B=c(()=>$((f.value-u.value)/f.value||0)),b=()=>{const n=t.value;if(!n||g&&!g.value)return;m=u.value,u.value="window"in n?n.pageYOffset:n.scrollTop;const v=n instanceof Window?document.documentElement.scrollHeight:n.scrollHeight;if(r!==v){r=v;return}a.value=u.value<m,i.value=Math.abs(u.value-f.value)};return C(a,()=>{s.value=s.value||u.value}),C(h,()=>{s.value=0}),j(()=>{C(()=>e.scrollTarget,n=>{var S;const v=n?document.querySelector(n):window;v&&v!==t.value&&((S=t.value)==null||S.removeEventListener("scroll",b),t.value=v,t.value.addEventListener("scroll",b,{passive:!0}))},{immediate:!0})}),q(()=>{var n;(n=t.value)==null||n.removeEventListener("scroll",b)}),g&&C(g,b,{immediate:!0}),{scrollThreshold:f,currentScroll:u,currentThreshold:i,isScrollActive:h,scrollRatio:B,isScrollingUp:a,savedScroll:s}}const _e=R({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Be(),...z(),...pe(),height:{type:[Number,String],default:64}},"VAppBar"),Le=W()({name:"VAppBar",props:_e(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:g}=o;const m=F(),r=D(e,"modelValue"),t=c(()=>{var V;const l=new Set(((V=e.scrollBehavior)==null?void 0:V.split(" "))??[]);return{hide:l.has("hide"),fullyHide:l.has("fully-hide"),inverted:l.has("inverted"),collapse:l.has("collapse"),elevate:l.has("elevate"),fadeImage:l.has("fade-image")}}),u=c(()=>{const l=t.value;return l.hide||l.fullyHide||l.inverted||l.collapse||l.elevate||l.fadeImage||!r.value}),{currentScroll:s,scrollThreshold:i,isScrollingUp:h,scrollRatio:a}=Te(e,{canScroll:u}),f=c(()=>t.value.hide||t.value.fullyHide),B=c(()=>e.collapse||t.value.collapse&&(t.value.inverted?a.value>0:a.value===0)),b=c(()=>e.flat||t.value.fullyHide&&!r.value||t.value.elevate&&(t.value.inverted?s.value>0:s.value===0)),n=c(()=>t.value.fadeImage?t.value.inverted?1-a.value:a.value:void 0),v=c(()=>{var E,M;if(t.value.hide&&t.value.inverted)return 0;const l=((E=m.value)==null?void 0:E.contentHeight)??0,V=((M=m.value)==null?void 0:M.extensionHeight)??0;return f.value?s.value<i.value||t.value.fullyHide?l+V:l:l+V});O(c(()=>!!e.scrollBehavior),()=>{J(()=>{f.value?t.value.inverted?r.value=s.value>i.value:r.value=h.value||s.value<i.value:r.value=!0})});const{ssrBootStyles:S}=Ve(),{layoutItemStyles:x}=G({id:e.name,order:c(()=>parseInt(e.order,10)),position:T(e,"location"),layoutSize:v,elementSize:k(void 0),active:r,absolute:T(e,"absolute")});return X(()=>{const l=Y.filterProps(e);return d(Y,A({ref:m,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...x.value,"--v-toolbar-image-opacity":n.value,height:void 0,...S.value},e.style]},l,{collapse:B.value,flat:b.value}),g)}),{}}}),Pe=R({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Z,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...K(),...Q({location:"top end"}),...ee(),...te(),...ae(),...oe({transition:"scale-rotate-transition"})},"VBadge"),Ie=W()({name:"VBadge",inheritAttrs:!1,props:Pe(),setup(e,o){const{backgroundColorClasses:g,backgroundColorStyles:m}=le(T(e,"color")),{roundedClasses:r}=ne(e),{t}=se(),{textColorClasses:u,textColorStyles:s}=re(T(e,"textColor")),{themeClasses:i}=ue(),{locationStyles:h}=ie(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?+(e.offsetY??0):["left","right"].includes(a)?+(e.offsetX??0):0));return X(()=>{const a=Number(e.content),f=!e.max||isNaN(a)?e.content:a<=+e.max?a:`${e.max}+`,[B,b]=ce(o.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return d(e.tag,A({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},b,{style:e.style}),{default:()=>{var n,v;return[d("div",{class:"v-badge__wrapper"},[(v=(n=o.slots).default)==null?void 0:v.call(n),d(de,{transition:e.transition},{default:()=>{var S,x;return[ve(d("span",A({class:["v-badge__badge",i.value,g.value,r.value,u.value],style:[m.value,s.value,e.inline?{}:h.value],"aria-atomic":"true","aria-label":t(e.label,a),"aria-live":"polite",role:"status"},B),[e.dot?void 0:o.slots.badge?(x=(S=o.slots).badge)==null?void 0:x.call(S):e.icon?d(me,{icon:e.icon},null):f]),[[ge,e.modelValue]])]}})])]}})}),{}}}),Me={__name:"default",setup(e){const o=fe(),{apiAuth:g}=ke(),m=he(),r=be(),t=c(()=>[{icon:"mdi-chat-processing",show:o.isLoggedIn},{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!o.isLoggedIn},{to:"/login",text:"登入",icon:"mdi-account-arrow-left",show:!o.isLoggedIn},{to:"/userPage",text:"個人頁面",icon:"mdi-account",show:o.isLoggedIn},{to:"/about",text:"關於",show:!0},{to:"/admin",text:"後台管理",icon:"mdi-cog",show:o.isLoggedIn&&o.isAdmin}]),u=async()=>{try{await g.delete("/user/logout")}catch(s){console.log(s)}o.logout(),m({text:"登出成功",snackbarProps:{color:"green"}}),r.push("/")};return(s,i)=>{const h=Se("router-view");return w(),_(L,null,[d(Le,null,{default:y(()=>[d(Ce,{class:"d-flex align-center"},{default:y(()=>[d(P,{to:"/",active:!1},{default:y(()=>i[0]||(i[0]=[I("放 logo 圖回 welcome")])),_:1}),d(ye),(w(!0),_(L,null,we(t.value,a=>(w(),_(L,{key:a.to},[a.show?(w(),H(P,{key:0,to:a.to,"prepend-icon":a.icon},{default:y(()=>[I(U(a.text)+" ",1),p(o).isLoggedIn&&p(o).notifications>0?(w(),H(Ie,{key:0,content:p(o).notifications,floating:"",color:"red"},null,8,["content"])):N("",!0)]),_:2},1032,["to","prepend-icon"])):N("",!0)],64))),128)),p(o).isLoggedIn?(w(),H(P,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:u},{default:y(()=>i[1]||(i[1]=[I(U("登出"))])),_:1})):N("",!0)]),_:1})]),_:1}),d(xe,null,{default:y(()=>[d(h)]),_:1})],64)}}};export{Me as default};
